<!--
Notes

- Rotate strings for uniform appearance

-->

<!DOCTYPE html>
<html>
  <head>
    <title>Newton's Cradle</title>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>
    <script src="https://unpkg.com/aframe-mirror-component/dist/aframe-mirror-component.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>
    <script src="https://rawgit.com/andreasplesch/aframe-meshline-component/master/dist/aframe-meshline-component.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-assets>
            <img id="pink" src="https://img.gs/bbdkhfbzkk/stretch/http://i.imgur.com/1hyyIUi.jpg" crossorigin="anonymous" />
            <img src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" id="grid" crossorigin="anonymous">
            <img src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg" id="chrome" crossorigin="anonymous">
            <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
            <a-asset-item id="dawningFont" src="https://cdn.glitch.com/c719c986-c0c5-48b8-967c-3cd8b8aa17f3%2FdawningOfANewDayRegular.typeface.json?1490305922844"></a-asset-item>
            <a-asset-item id="exoFont" src="https://cdn.glitch.com/c719c986-c0c5-48b8-967c-3cd8b8aa17f3%2Fexo2Black.typeface.json?1490305922150"></a-asset-item>
            <a-asset-item id="exoItalicFont" src="https://cdn.glitch.com/c719c986-c0c5-48b8-967c-3cd8b8aa17f3%2Fexo2BlackItalic.typeface.json?1490305922725"></a-asset-item>
        </a-assets>

        <!-- set up curves -->
        <a-curve id="track1">

            <a-curve-point position="-4 1 -10"></a-curve-point>
            <a-curve-point position="-4.416 1.010 -10"></a-curve-point>
            <a-curve-point position="-4.84 1.043 -10"></a-curve-point>
            <a-curve-point position="-5.28 1.098 -10"></a-curve-point>
            <a-curve-point position="-5.68 1.174 -10"></a-curve-point>
            <a-curve-point position="-6.08 1.272 -10"></a-curve-point>
            <a-curve-point position="-6.48 1.391 -10"></a-curve-point>
            <a-curve-point position="-7.048 1.531 -10"></a-curve-point>
            <a-curve-point position="-7.632 1.691 -10"></a-curve-point>
            <a-curve-point position="-8 1.871 -10"></a-curve-point>
            <a-curve-point position="-8.36 2.071 -10"></a-curve-point>
            <a-curve-point position="-8.72 2.29 -10"></a-curve-point>
            <a-curve-point position="-9.04 2.527 -10"></a-curve-point>
            <a-curve-point position="-9.36 2.782 -10"></a-curve-point>
            <a-curve-point position="-9.68 3.054 -10"></a-curve-point><!--mid-->
            <a-curve-point position="-9.36 2.782 -10"></a-curve-point>
            <a-curve-point position="-9.04 2.527 -10"></a-curve-point>
            <a-curve-point position="-8.72 2.29 -10"></a-curve-point>
            <a-curve-point position="-8.36 2.071 -10"></a-curve-point>
            <a-curve-point position="-8 1.871 -10"></a-curve-point>
            <a-curve-point position="-7.632 1.691 -10"></a-curve-point>
            <a-curve-point position="-7.248 1.531 -10"></a-curve-point>
            <a-curve-point position="-6.48 1.391 -10"></a-curve-point>
            <a-curve-point position="-6.08 1.272 -10"></a-curve-point>
            <a-curve-point position="-5.68 1.174 -10"></a-curve-point>
            <a-curve-point position="-5.28 1.098 -10"></a-curve-point>
            <a-curve-point position="-4.84 1.043 -10"></a-curve-point>
            <a-curve-point position="-4.416 1.010 -10"></a-curve-point>

            <a-curve-point position="-4 1 -10"></a-curve-point><!--END-->
            <a-curve-point position="-4 1 -10"></a-curve-point>
            <a-curve-point position="-4 1 -10"></a-curve-point>
            <a-curve-point position="-4 1 -10"></a-curve-point>
        </a-curve>
        <a-curve id="track2">
            <a-curve-point position="4 1 -10"></a-curve-point>
            <a-curve-point position="7 2.25 -10"></a-curve-point>
            <a-curve-point position="4 1 -10"></a-curve-point>
            <a-curve-point position="4 1 -10"></a-curve-point>
            <a-curve-point position="4 1 -10"></a-curve-point>
            <a-curve-point position="4 1 -10"></a-curve-point>
        </a-curve>

        <!-- five balls -->
        <a-entity scale="1 1 1" 
                  geometry="primitive: sphere" 
                  position="0 1 -10" 
                  material="color: whited; metalness: 0.96d; roughness: 0.1; sphericalEnvMap: #sky;" 
                  mirrors>
            <!--<a-animation easing="linear" attribute="rotation" dur="10000" to="0 0 360" repeat="indefinite"></a-animation>-->
        </a-entity>
        <a-entity scale="1 1 1" 
                  geometry="primitive: sphere" 
                  position="-2 1 -10" 
                  material="color: whited; metalness: 0.96d; roughness: 0.1; sphericalEnvMap: #sky;" 
                  mirrors>
            
        </a-entity>
        <a-entity scale="1 1 1" 
                  geometry="primitive: sphere" 
                  position="2 1 -10" 
                  material="color: whited; metalness: 0.96d; roughness: 0.1; sphericalEnvMap: #sky;" 
                  mirrors>
            
        </a-entity>
        <a-entity scale="1 1 1" 
                  geometry="primitive: sphere" 
                  position="-4 1 -10" 
                  material="color: whited; metalness: 0.96d; roughness: 0.1; sphericalEnvMap: #sky;" 
                  mirrors
                  alongpath="curve: #track1; delay: 2000; dur: 4000; loop: true">
            <!--<a-animation attribute="position" to="-5.5 1.2 -10" dur="800" direction="normal" delay="2000" ease="ease-in" repeat="indefinte"></a-animation>
            <a-animation attribute="position" from="-5.5 1.2 -10" to="-4 1 -10" dur="800" direction="normal" delay="2800" repeat="indefinte"></a-animation>-->
        </a-entity>
        <a-entity scale="1 1 1" 
                  geometry="primitive: sphere" 
                  position="4 1 -10" 
                  material="color: whited; metalness: 0.96d; roughness: 0.1; sphericalEnvMap: #sky;" 
                  mirrors
                  alongpath="curve: #track2; delay: 4000; dur: 4000; loop: true">
            <!--<a-animation attribute="position" to="5.5 1.2 -10" dur="800" direction="normal" delay="3200" ease="ease-in" repeat="indefinte"></a-animation>
            <a-animation attribute="position" from="5.5 1.2 -10" to="4 1 -10" dur="800" direction="normal" delay="4000" repeat="indefinte"></a-animation>-->
        </a-entity>

        <!-- lines for balls -->
        <a-entity meshline="lineWidth: 2; path: -4 1 -10, -4 8.5 -10; color: #999"
                  rotation="0 0 0">       
        </a-entity>

        <!-- strings for balls -->
        <!--<a-cylinder height="8" radius="0.015" color="white" position="0 4.5 -10">
        </a-cylinder>
        <a-cylinder height="8" radius="0.015" color="white" position="2 6.5 -10"></a-cylinder>
        <a-cylinder height="8" radius="0.015" color="white" position="-2 4 -10"></a-cylinder>
        <a-cylinder height="8" radius="0.015" color="white" position="4 5 -10">
            <a-animation property="position" to="7 2.25 -10" dur="1000" delay="4000"></a-animation>
            <a-animation property="rotation" to="0 0 30" dur="1000" delay="4000"></a-animation>
        </a-cylinder>
        <a-cylinder height="8" radius="0.015" color="white" position="-6.5 5.8 -10" rotation="0 0 -45">

        </a-cylinder>-->

        <a-plane color="#CCC" height="20" width="20"></a-plane>

        <!-- logo -->
        <!-- animation to drop logo from sky -->
        <a-entity class="logo" position="0 1 -4" rotation="5 0 0">
            <a-entity
            class="logo"
            rotation="0 0 5"
            position="-3 3.5 0"
            text-geometry="value: Newton's Cradle; font: #dawningFont; bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.05; curveSegments: 12; size: .7; height: 0;"
            material="color:lavenderblush; metalness:1; roughness: 0; sphericalEnvMap: #pink; opacity: 1; transparent: false"
            >
            <a-animation attribute="material.opacity" begin="fade" to="0" fill="forwards"></a-animation>
            <a-animation attribute="material.transparent" to="true"></a-animation>
            </a-entity>
            <a-animation attribute="position" dur="1400" fill="forwards" to="0 -3.5 -4" repeat="0"></a-animation>

        </a-entity>

        <!-- frame -->
        <a-box height="10" width="0.2" depth="0.2" position="5 3.9 -9" color="brown"></a-box>
        <a-box height="10" width="0.2" depth="0.2" position="5 3.9 -11" color="brown"></a-box>
        <a-box height="10" width="0.2" depth="0.2" position="-5 3.9 -9" color="brown"></a-box>
        <a-box height="10" width="0.2" depth="0.2" position="-5 3.9 -11" color="brown"></a-box>
        <a-box height="0.15" width="10" depth="2.2" position="0 8.83 -10.1" color="brown" rotation="2.2 0 0"></a-box>

        <!-- floor -->
        <a-entity
            geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
            material="src: #grid; repeat: 10000 10000; transparent: true;metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

        <!-- lighting -->
        <a-entity light="color: #ccccff; intensity: 1; type: ambient;" visible=""></a-entity>
        <a-entity light="color: ffaaff; intensity: 1.5" position="5 5 5"></a-entity>
        <a-entity light="color: white; intensity: 0.5" position="-5 5 15"></a-entity>
        <a-entity light="color: white; type: ambient;"></a-entity>

        <a-sky src="#sky" rotation="0 -90 0"></a-sky>
    </a-scene>
    <script>
        let temp = document.querySelectorAll('.logo').emit('fade');
        temp();
    </script>
  </body>
</html>
